# Tech Challenge 1 - API de Consulta de Livros

Projeto desenvolvido para o Tech Challenge da Fase 1 da P√≥s-Tech FIAP em Machine Learning Engineering.

## üìã Sobre o Projeto

API REST p√∫blica desenvolvida com FastAPI para gerenciamento e consulta de cat√°logo de livros. O projeto inclui funcionalidade completa de web scraping para coleta autom√°tica de dados do site [books.toscrape.com](https://books.toscrape.com/), armazenamento em banco de dados SQLite e disponibiliza√ß√£o via endpoints RESTful.

## üéØ Objetivos do Projeto

- Desenvolver um pipeline completo de extra√ß√£o, transforma√ß√£o e disponibiliza√ß√£o de dados
- Criar uma API escal√°vel e reus√°vel para futuros modelos de Machine Learning
- Implementar web scraping robusto com processamento ass√≠ncrono
- Fornecer endpoints RESTful bem documentados e testados
- **[BONUS]** Implementar sistema de autentica√ß√£o JWT completo com controle de acesso

## üöÄ Tecnologias Utilizadas

- **FastAPI** - Framework web moderno e r√°pido para constru√ß√£o de APIs
- **SQLAlchemy** - ORM para gerenciamento do banco de dados
- **httpx** - Cliente HTTP ass√≠ncrono para web scraping
- **BeautifulSoup4** - Parser HTML para extra√ß√£o de dados
- **Pydantic** - Valida√ß√£o de dados e serializa√ß√£o
- **Uvicorn** - Servidor ASGI de alta performance
- **Pytest** - Framework de testes
- **uv** - Gerenciador moderno de depend√™ncias e ambientes virtuais Python
- **JWT (JSON Web Tokens)** - Autentica√ß√£o e autoriza√ß√£o segura
- **Bcrypt** - Hash de senhas com seguran√ßa

## üì¶ Instala√ß√£o e Configura√ß√£o

### Pr√©-requisitos

- Python 3.11 ou superior
- [uv](https://github.com/astral-sh/uv) instalado

### Passos de Instala√ß√£o

```bash
# 1. Clone o reposit√≥rio
git clone https://github.com/fiap-7MLET/tech-challenge-1.git
cd tech-challenge-1

# 2. Instale as depend√™ncias usando uv
uv sync

# 3. (Opcional) Ative o ambiente virtual
source .venv/bin/activate  # Linux/Mac
# ou
.venv\Scripts\activate  # Windows
```

### Configura√ß√£o de Vari√°veis de Ambiente

Crie um arquivo `.env` na raiz do projeto:

```env
DATABASE_URL=sqlite:///db.sqlite3
SECRET_KEY=your-secret-key-change-in-production
DEBUG=False
```

**IMPORTANTE**: Gere uma chave secreta segura para produ√ß√£o:
```bash
python3 -c "import secrets; print(secrets.token_urlsafe(32))"
```

## üèÉ Como Executar

### Iniciar o Servidor de Desenvolvimento

```bash
uv run uvicorn src.app:app --host 0.0.0.0 --port 8000 --reload
```

A aplica√ß√£o estar√° dispon√≠vel em:
- **API**: http://localhost:8000
- **Documenta√ß√£o Swagger**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

### Executar Migra√ß√µes do Banco de Dados

Antes de usar a API, execute as migra√ß√µes para criar as tabelas:

```bash
uv run alembic upgrade head
```

### Popular o Banco de Dados

Para popular o banco de dados, voc√™ precisa primeiro se registrar como usu√°rio admin e depois disparar o scraping:

```bash
# 1. Registrar primeiro usu√°rio (automaticamente se torna admin)
curl -X POST http://localhost:8000/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email": "admin@example.com", "password": "AdminPass123"}'

# 2. Salvar o token retornado e usar para disparar scraping
curl -X POST http://localhost:8000/scraping/trigger \
  -H "Authorization: Bearer SEU_TOKEN_AQUI"
```

Este comando ir√°:
1. Fazer scraping de aproximadamente 1000 livros do site books.toscrape.com
2. Salvar os dados no banco de dados SQLite
3. Gerar um arquivo CSV em `data/books.csv`
4. Retornar estat√≠sticas da opera√ß√£o

**Nota**: O endpoint `/scraping/trigger` requer privil√©gios de administrador.

## üîß Endpoints da API

### üîì Endpoints P√∫blicos (Sem Autentica√ß√£o)

#### Health Check
- **GET** `/health/` - Verifica o status da API e conectividade com o banco de dados

### üîê Endpoints de Autentica√ß√£o

#### Registro e Login
- **POST** `/api/v1/auth/register` - Registro de novo usu√°rio
  - Primeiro usu√°rio registrado automaticamente se torna admin
  - Requisitos de senha: m√≠nimo 8 caracteres, 1 mai√∫scula, 1 min√∫scula, 1 d√≠gito
  - Retorna: `access_token`, `refresh_token`, `token_type`
- **POST** `/api/v1/auth/login` - Login de usu√°rio existente (OAuth2 password flow)
  - Retorna: `access_token`, `refresh_token`, `token_type`
- **POST** `/api/v1/auth/refresh` - Renova√ß√£o de tokens usando refresh token
  - Retorna: novos `access_token` e `refresh_token`
- **GET** `/api/v1/auth/me` - Informa√ß√µes do usu√°rio atual (requer autentica√ß√£o)

#### Gerenciamento de Usu√°rios (Admin)
- **GET** `/api/v1/auth/users` - **[ADMIN ONLY]** Lista todos os usu√°rios registrados
  - Retorna: array com id, email, is_active, is_admin, created_at
- **POST** `/api/v1/auth/users/{user_id}/promote` - **[ADMIN ONLY]** Promove usu√°rio a admin
  - Retorna: informa√ß√µes do usu√°rio atualizado
  - Valida√ß√µes: usu√°rio existe, n√£o √© admin ainda
- **POST** `/api/v1/auth/users/{user_id}/demote` - **[ADMIN ONLY]** Remove privil√©gios de admin
  - Retorna: informa√ß√µes do usu√°rio atualizado
  - Valida√ß√µes: usu√°rio existe, √© admin, n√£o pode se rebaixar (prote√ß√£o contra lockout)

### üîí Endpoints Protegidos (Requerem Autentica√ß√£o)

**Todos os endpoints abaixo requerem header de autentica√ß√£o:**
```
Authorization: Bearer SEU_ACCESS_TOKEN
```

#### Livros
- **GET** `/books/` - Lista todos os livros com pagina√ß√£o
  - Query params: `page` (default: 1), `per_page` (default: 10)
  - Resposta inclui URLs de navega√ß√£o: `next`, `previous`
- **GET** `/books/{id}` - Retorna detalhes de um livro espec√≠fico
- **GET** `/books/search` - Busca livros por t√≠tulo e/ou categoria
  - Query params: `title`, `category`, `page`, `per_page`
  - Resposta inclui URLs de navega√ß√£o: `next`, `previous`

#### Categorias
- **GET** `/categories/` - Lista todas as categorias dispon√≠veis com pagina√ß√£o
  - Query params: `page` (default: 1), `per_page` (default: 10)
  - Resposta inclui URLs de navega√ß√£o: `next`, `previous`

#### Scraping
- **GET** `/scraping/status` - Retorna estat√≠sticas do banco de dados (total de livros, categorias, etc.)
- **POST** `/scraping/trigger` - **[ADMIN ONLY]** Dispara o processo de scraping e popula o banco de dados

#### Estat√≠sticas (Endpoints Preparados)
- **GET** `/stats/overview` - Estat√≠sticas gerais da cole√ß√£o
- **GET** `/stats/categories` - Estat√≠sticas detalhadas por categoria

#### Machine Learning (Endpoints Preparados)
- **GET** `/ml/features` - Dados formatados para features de ML
- **GET** `/ml/training-data` - Dataset para treinamento
- **POST** `/ml/predictions` - Endpoint para receber predi√ß√µes

### üîë Sistema de Autentica√ß√£o

A API implementa autentica√ß√£o JWT (JSON Web Tokens) completa com:

- **Access Tokens**: V√°lidos por 10 minutos
- **Refresh Tokens**: V√°lidos por 5 minutos (podem ser usados para obter novos tokens)
- **Roles**: Admin e Regular User
- **Seguran√ßa**: Senhas hasheadas com Bcrypt
- **OAuth2 Compliance**: Segue padr√£o OAuth2 Password Flow

#### Como Usar Autentica√ß√£o

1. **Registrar um usu√°rio:**
```bash
curl -X POST http://localhost:8000/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email": "user@example.com", "password": "SecurePass123"}'
```

2. **Fazer login:**
```bash
curl -X POST http://localhost:8000/api/v1/auth/login \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=user@example.com&password=SecurePass123"
```

3. **Usar o token em requisi√ß√µes:**
```bash
curl http://localhost:8000/books/ \
  -H "Authorization: Bearer SEU_ACCESS_TOKEN"
```

4. **Renovar token expirado:**
```bash
curl -X POST http://localhost:8000/api/v1/auth/refresh \
  -H "Content-Type: application/json" \
  -d '{"refresh_token": "SEU_REFRESH_TOKEN"}'
```

#### Gerenciamento de Admin

Admins podem gerenciar outros usu√°rios:

1. **Listar todos os usu√°rios:**
```bash
curl http://localhost:8000/api/v1/auth/users \
  -H "Authorization: Bearer TOKEN_DO_ADMIN"
```

2. **Promover usu√°rio a admin:**
```bash
curl -X POST http://localhost:8000/api/v1/auth/users/2/promote \
  -H "Authorization: Bearer TOKEN_DO_ADMIN"
```

3. **Remover privil√©gios de admin:**
```bash
curl -X POST http://localhost:8000/api/v1/auth/users/2/demote \
  -H "Authorization: Bearer TOKEN_DO_ADMIN"
```

**Nota de Seguran√ßa**: Admins n√£o podem se rebaixar para prevenir lockout do sistema.

## üåê Exemplos de Uso

A API pode ser testada de duas formas: via **linha de comando (curl)** ou via **Swagger UI (interface gr√°fica)**. Recomendamos usar o Swagger UI para explora√ß√£o inicial, pois oferece documenta√ß√£o interativa e valida√ß√£o autom√°tica.

### üìñ Acessando a Documenta√ß√£o Interativa

**Swagger UI**: http://localhost:8000/docs
**ReDoc**: http://localhost:8000/redoc

### üîê Autenticando no Swagger UI

Para testar endpoints protegidos no Swagger UI:

1. Acesse http://localhost:8000/docs
2. Clique no bot√£o **"Authorize"** no topo da p√°gina
3. Primeiro, registre um usu√°rio usando `POST /api/v1/auth/register`
4. Use o `access_token` retornado no campo de autoriza√ß√£o
5. Clique em "Authorize" e depois "Close"
6. Agora voc√™ pode testar todos os endpoints protegidos!

---

### Verificar Status da API (P√∫blico - Sem Autentica√ß√£o)

**Via curl:**
```bash
curl http://localhost:8000/health/
```

**Via Swagger:**
1. Acesse http://localhost:8000/docs
2. Localize `GET /health/`
3. Clique em "Try it out" ‚Üí "Execute"
4. Visualize a resposta com status da API e conectividade do banco

---

### Registrar Novo Usu√°rio

**Via curl:**
```bash
curl -X POST http://localhost:8000/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com",
    "password": "SecurePass123"
  }'
```

**Resposta de exemplo:**
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "bearer"
}
```

**Nota**: O primeiro usu√°rio registrado automaticamente se torna administrador.

---

### Listar Livros (com pagina√ß√£o) - Requer Autentica√ß√£o

**Via curl:**
```bash
# Substitua SEU_TOKEN pelo access_token obtido no registro/login
curl "http://localhost:8000/books/?page=1&per_page=10" \
  -H "Authorization: Bearer SEU_TOKEN"
```

**Via Swagger:**
1. Acesse http://localhost:8000/docs
2. **Clique em "Authorize"** e insira seu token
3. Localize `GET /books/`
4. Clique em "Try it out"
5. Ajuste os par√¢metros:
   - `page`: 1
   - `per_page`: 10
6. Clique em "Execute"

**Resposta de exemplo:**
```json
{
  "data": [
    {
      "id": 1,
      "title": "A Light in the Attic",
      "price": "51.77",
      "rating": 3,
      "availability": true,
      "category": "Poetry",
      "image": "https://books.toscrape.com/media/cache/2c/da/2cdad67c44b002e7ead0cc35693c0e8b.jpg"
    }
  ],
  "page": 1,
  "per_page": 10,
  "total": 100,
  "pages": 10,
  "next": "http://localhost:8000/books/?page=2&per_page=10",
  "previous": null
}
```

---

### Buscar Livro por ID - Requer Autentica√ß√£o

**Via curl:**
```bash
curl "http://localhost:8000/books/1" \
  -H "Authorization: Bearer SEU_TOKEN"
```

**Via Swagger:**
1. Acesse http://localhost:8000/docs
2. **Certifique-se de estar autenticado** (bot√£o "Authorize")
3. Localize `GET /books/{id}`
4. Clique em "Try it out"
5. Insira o `id` desejado (ex: 1)
6. Clique em "Execute"

**Resposta de exemplo:**
```json
{
  "id": 1,
  "title": "A Light in the Attic",
  "price": "51.77",
  "rating": 3,
  "availability": true,
  "category": "Poetry",
  "image": "https://books.toscrape.com/media/cache/2c/da/2cdad67c44b002e7ead0cc35693c0e8b.jpg"
}
```

---

### Buscar Livros por T√≠tulo

**Via curl:**
```bash
curl "http://localhost:8000/books/search?title=python&page=1&per_page=10"
```

**Via Swagger:**
1. Acesse http://localhost:8000/docs
2. Localize `GET /books/search`
3. Clique em "Try it out"
4. Preencha os par√¢metros:
   - `title`: "python"
   - `page`: 1
   - `per_page`: 10
5. Clique em "Execute"

**Resposta de exemplo:**
```json
{
  "data": [
    {
      "id": 23,
      "title": "Learning Python",
      "price": "30.23",
      "rating": 4,
      "availability": true,
      "category": "Programming",
      "image": "https://books.toscrape.com/media/cache/..."
    }
  ],
  "page": 1,
  "per_page": 10,
  "total": 15,
  "pages": 2,
  "next": "http://localhost:8000/books/search?title=python&per_page=10&page=2",
  "previous": null
}
```

---

### Buscar Livros por Categoria

**Via curl:**
```bash
curl "http://localhost:8000/books/search?category=Fiction&page=1&per_page=10"
```

**Via Swagger:**
1. Acesse http://localhost:8000/docs
2. Localize `GET /books/search`
3. Clique em "Try it out"
4. Preencha:
   - `category`: "Fiction"
   - `page`: 1
   - `per_page`: 10
5. Clique em "Execute"

---

### Listar Todas as Categorias

**Via curl:**
```bash
curl "http://localhost:8000/categories/?page=1&per_page=20"
```

**Via Swagger:**
1. Acesse http://localhost:8000/docs
2. Localize `GET /categories/`
3. Clique em "Try it out"
4. Ajuste:
   - `page`: 1
   - `per_page`: 20
5. Clique em "Execute"

**Resposta de exemplo:**
```json
{
  "data": [
    {"name": "Travel", "count": 11},
    {"name": "Mystery", "count": 32},
    {"name": "Historical Fiction", "count": 14}
  ],
  "page": 1,
  "per_page": 20,
  "total": 50,
  "pages": 3,
  "next": "http://localhost:8000/categories/?page=2&per_page=20",
  "previous": null
}
```

---

### Disparar Processo de Scraping - Requer Admin

**IMPORTANTE**: Este endpoint requer privil√©gios de administrador. Apenas o primeiro usu√°rio registrado ou usu√°rios com flag `is_admin=true` podem acess√°-lo.

**Via curl:**
```bash
# Requer token de usu√°rio ADMIN
curl -X POST http://localhost:8000/scraping/trigger \
  -H "Authorization: Bearer TOKEN_DO_ADMIN"
```

**Via Swagger:**
1. Acesse http://localhost:8000/docs
2. **Autentique com usu√°rio admin** (primeiro usu√°rio registrado)
3. Localize `POST /scraping/trigger`
4. Clique em "Try it out"
5. Clique em "Execute"
6. Aguarde o processo concluir (pode levar alguns minutos)

**Resposta de exemplo:**
```json
{
  "status": "completed",
  "total_books": 1000,
  "total_categories": 50,
  "csv_file": "data/books.csv",
  "execution_time": "45.2s"
}
```

---

### Verificar Status do Scraping

**Via curl:**
```bash
curl "http://localhost:8000/scraping/status"
```

**Via Swagger:**
1. Acesse http://localhost:8000/docs
2. Localize `GET /scraping/status`
3. Clique em "Try it out" ‚Üí "Execute"

**Resposta de exemplo:**
```json
{
  "total_books": 1000,
  "total_categories": 50,
  "last_updated": "2025-10-21T14:30:00"
}
```

---

### üí° Dicas para Usar o Swagger UI

- **Schemas**: Role at√© o final da p√°gina do Swagger para ver todos os modelos de dados
- **Valida√ß√£o**: O Swagger valida automaticamente os tipos de dados antes de enviar
- **Exemplos**: Clique em "Schema" ao lado de "Example Value" para ver a estrutura completa
- **Download**: Baixe a especifica√ß√£o OpenAPI em http://localhost:8000/openapi.json
- **Autoriza√ß√£o**: Quando implementada autentica√ß√£o, use o bot√£o "Authorize" no topo

## üìÅ Estrutura do Projeto

```
tech-challenge-1/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schemas/          # Schemas Pydantic para valida√ß√£o
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ book.py
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ auth.py       # Schemas de autentica√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ models/                # Modelos SQLAlchemy
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ book.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user.py
‚îÇ   ‚îú‚îÄ‚îÄ routes/                # Rotas da API (endpoints)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ book_routes.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ category_routes.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ health_routes.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scraping_routes.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stats_routes.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ml_routes.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user_routes.py
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/              # Sistema de autentica√ß√£o
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ password.py    # Hash e valida√ß√£o de senhas
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jwt.py         # Gerenciamento de tokens JWT
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dependencies.py # Depend√™ncias de autentica√ß√£o
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ scraping/          # L√≥gica de web scraping
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ core.py        # Scraper ass√≠ncrono principal
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ file_handler.py # Manipula√ß√£o de arquivos CSV
‚îÇ   ‚îú‚îÄ‚îÄ extensions.py          # Configura√ß√£o do banco de dados
‚îÇ   ‚îú‚îÄ‚îÄ conf.py                # Configura√ß√µes gerais
‚îÇ   ‚îî‚îÄ‚îÄ app.py                 # Aplica√ß√£o principal FastAPI
‚îú‚îÄ‚îÄ data/                      # Dados gerados (CSV)
‚îú‚îÄ‚îÄ migrations/                # Migrations do banco de dados
‚îú‚îÄ‚îÄ tests/                     # Testes automatizados
‚îú‚îÄ‚îÄ pyproject.toml            # Configura√ß√£o de depend√™ncias (uv/pip)
‚îú‚îÄ‚îÄ uv.lock                   # Lock file do uv
‚îú‚îÄ‚îÄ Tech_Challenge_API.postman_collection.json  # Cole√ß√£o Postman
‚îî‚îÄ‚îÄ README.md                 # Este arquivo
```

## üóÑÔ∏è Banco de Dados

### Modelo de Dados

O projeto utiliza SQLite como banco de dados com a seguinte estrutura:

**Tabela: books**
- `id` (Integer, PK) - Identificador √∫nico
- `title` (String) - T√≠tulo do livro (√∫nico)
- `price` (Numeric) - Pre√ßo do livro
- `rating` (Integer) - Avalia√ß√£o de 1 a 5
- `availability` (Boolean) - Disponibilidade em estoque
- `category` (String) - Categoria do livro
- `image` (String) - URL da imagem

**Tabela: users**
- `id` (Integer, PK) - Identificador √∫nico
- `email` (String, unique) - Email do usu√°rio
- `password` (String) - Senha hasheada com Bcrypt
- `is_active` (Boolean) - Usu√°rio ativo
- `is_admin` (Boolean) - Privil√©gios de administrador
- `created_at` (DateTime) - Data de cria√ß√£o

### Gerenciamento do Banco

O banco de dados √© gerenciado via Alembic migrations:

```bash
# Criar o banco e todas as tabelas
uv run alembic upgrade head

# Ver hist√≥rico de migrations
uv run alembic history

# Criar nova migration (ap√≥s alterar models)
uv run alembic revision --autogenerate -m "descri√ß√£o"
```

## üï∑Ô∏è Web Scraping

### Caracter√≠sticas do Scraper

- **Ass√≠ncrono**: Utiliza `httpx` e `asyncio` para m√°xima performance
- **Robusto**: Tratamento de erros e retry autom√°tico
- **Completo**: Extrai todos os campos necess√°rios (t√≠tulo, pre√ßo, rating, categoria, imagem)
- **Escal√°vel**: Processa m√∫ltiplas p√°ginas em paralelo
- **Logging**: Registra progresso e erros durante a execu√ß√£o

### Fonte de Dados

- **URL**: https://books.toscrape.com/
- **Campos Extra√≠dos**:
  - T√≠tulo do livro
  - Pre√ßo (em libras)
  - Rating (1-5 estrelas)
  - Disponibilidade em estoque
  - Categoria
  - URL da imagem

## üß™ Testes

### Executar Testes

```bash
# Executar todos os testes
uv run pytest

# Executar com output detalhado
uv run pytest -v

# Executar com cobertura de c√≥digo
uv run pytest --cov=src --cov-report=html
```

### Cobertura de Testes

O projeto inclui testes para:
- ‚úÖ Rotas da API
- ‚úÖ Modelos de dados
- ‚úÖ Schemas Pydantic
- ‚úÖ Fun√ß√µes de scraping
- ‚úÖ Manipula√ß√£o de arquivos CSV
- ‚úÖ Sistema de autentica√ß√£o JWT (64 testes)
  - Password hashing e valida√ß√£o
  - Cria√ß√£o e valida√ß√£o de tokens
  - Endpoints de autentica√ß√£o (registro, login, refresh)
  - Prote√ß√£o de endpoints
  - Controle de acesso admin

## üìä Cole√ß√£o Postman

Uma cole√ß√£o Postman completa est√° dispon√≠vel em `Tech_Challenge_API.postman_collection.json` com todos os endpoints configurados e exemplos de requisi√ß√µes.

### Importar no Postman

1. Abra o Postman
2. Clique em "Import"
3. Selecione o arquivo `Tech_Challenge_API.postman_collection.json`
4. A cole√ß√£o estar√° dispon√≠vel com todos os endpoints pr√©-configurados

## üèóÔ∏è Arquitetura e Pipeline de Dados

### Fluxo de Dados

```
[books.toscrape.com]
    ‚Üì (Web Scraping - httpx + BeautifulSoup)
[Dados Brutos]
    ‚Üì (Transforma√ß√£o e Limpeza)
[Dados Estruturados]
    ‚Üì (Armazenamento Dual)
    ‚îú‚Üí [SQLite Database] ‚Üí [FastAPI] ‚Üí [Endpoints REST] ‚Üí [Consumidores]
    ‚îî‚Üí [CSV File] ‚Üí [An√°lise/ML]
```

### Escalabilidade Futura

A arquitetura foi desenhada pensando em:
- **Modularidade**: Componentes independentes e reutiliz√°veis
- **Extensibilidade**: F√°cil adi√ß√£o de novos endpoints e funcionalidades
- **ML-Ready**: Estrutura preparada para integra√ß√£o com modelos de ML
- **Cache**: Possibilidade de adicionar camada de cache (Redis)
- **Queue**: Preparado para adicionar filas de processamento (Celery)

## üîí Seguran√ßa

### Pr√°ticas de Seguran√ßa Implementadas

1. **Autentica√ß√£o JWT**
   - Tokens assinados com HMAC SHA-256
   - Tokens de curta dura√ß√£o (10 minutos para access, 5 minutos para refresh)
   - Separa√ß√£o de access e refresh tokens

2. **Senhas**
   - Hash com Bcrypt (algoritmo adaptativo)
   - Valida√ß√£o de for√ßa: m√≠nimo 8 caracteres, letras mai√∫sculas, min√∫sculas e d√≠gitos
   - Nunca armazenadas em texto plano

3. **Controle de Acesso**
   - Role-Based Access Control (RBAC)
   - Endpoints protegidos por autentica√ß√£o
   - Endpoints administrativos requerem privil√©gios especiais
   - Sistema de gerenciamento de admin (promote/demote)
   - Prote√ß√£o contra auto-rebaixamento (admins n√£o podem se remover)

4. **Valida√ß√£o de Dados**
   - Valida√ß√£o via Pydantic em todas as entradas
   - Sanitiza√ß√£o autom√°tica de dados
   - Tipos de dados fortemente tipados

### Recomenda√ß√µes de Produ√ß√£o

Para ambiente de produ√ß√£o, recomenda-se:
- [ ] Usar HTTPS (TLS/SSL)
- [ ] Configurar CORS apropriadamente
- [ ] Implementar rate limiting
- [ ] Adicionar logging de seguran√ßa
- [ ] Usar SECRET_KEY gerada criptograficamente
- [ ] Implementar rota√ß√£o de tokens
- [ ] Adicionar autentica√ß√£o de dois fatores (2FA)
- [ ] Configurar timeouts de sess√£o
- [ ] Implementar prote√ß√£o contra CSRF

## üéì Cen√°rio de Uso para ML

Esta API foi desenvolvida pensando em servir como base para:
1. **Sistemas de Recomenda√ß√£o**: Dados estruturados de livros, categorias e ratings
2. **An√°lise de Pre√ßos**: Hist√≥rico e compara√ß√£o de pre√ßos
3. **Classifica√ß√£o de Texto**: Categoriza√ß√£o autom√°tica baseada em t√≠tulos
4. **Feature Engineering**: Endpoints preparados para exportar features
5. **Controle de Acesso**: Sistema de autentica√ß√£o pronto para integra√ß√£o com servi√ßos ML

## üë• Equipe

Desenvolvido como parte do Tech Challenge - Fase 1
P√≥s-Tech FIAP - Machine Learning Engineering

## üìÑ Licen√ßa

Este projeto est√° sob a licen√ßa MIT.

---

**Observa√ß√£o**: Este projeto foi desenvolvido para fins educacionais como parte do Tech Challenge da FIAP.
